<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8"/>
    <style>
        body{
            margin:0;
            padding:0;
        }
        .container{
            width:400px;
            height:600px;
            margin:50px;
            padding:50px;
            border:1px solid #ccc;
        }
        ul{
            margin:0;
            padding:0;
        }
        ul li{
            display: block;
            width:400px;
            height:50px;
            line-height: 50px;
            text-align: center;
            margin-bottom:5px;
            background: #fff;
            border:1px solid #aaa;
        }
        ul li.hidden{
            visibility: hidden;
        }
        ul li:hover{
            background: #10aeb8;
            color:#fff;
        }
    </style>
</head>
<body>

<div class="container">
    <ul>
        <li class="a1">11111111111</li>
        <li class="a2">22222222222</li>
        <li class="a3">33333333333</li>
        <li class="a4">44444444444</li>
        <li class="a5">55555555555</li>
        <li class="a6">66666666666</li>
        <li class="a7">77777777777</li>
        <li class="a8">88888888888</li>
        <li class="a9">99999999999</li>
    </ul>
</div>
<p id="demo"></p>

<script>
    var ul = document.querySelector('ul');
    var li = document.querySelectorAll('li');
    var pos = [];
    for(var i=0; i<li.length;i++){
        pos.push(li[i].offsetTop);
        li[i].setAttribute('title',li[i].offsetTop);
    }
    console.dir(pos);
    var lock = false;
    var empty = false;
    ul.addEventListener('mousedown',function(e){
        lock = true;
        var target = document.querySelector('.'+e.target.className);
        var old_pos = {
            x : target.offsetLeft,
            y : target.offsetTop
        };
        var foo = {
            x : e.pageX - old_pos.x,
            y : e.pageY - old_pos.y
        };
        target.style.position = 'absolute';
        target.style.left = target.offsetLeft + 'px';
        target.style.top = target.offsetTop + 'px';
        target.style.cursor = 'move';
        if(!empty){
            var empty_li = document.createElement('li');
            empty_li.className = 'hidden';
            ul.insertBefore(empty_li,target);
        }

        target.addEventListener('mousemove',function(e){
            empty = true;
            if(lock){
                var new_pos = {
                    x : e.clientX + (document.body.scrollLeft || document.documentElement.scrollLeft),
                    y : e.clientY + (document.body.scrollTop || document.documentElement.scrollTop)
                };
                this.style.left = new_pos.x-foo.x + 'px';
                this.style.top = new_pos.y-foo.y + 'px';
                this.setAttribute('title',new_pos.y);


                for(var i=0; i<pos.length;i++){
                    if(new_pos.y > pos[i] && (new_pos.y < pos[i+1] && i<=pos.length-1)){
                        ul.insertBefore(empty_li,li[i]);
                        break;
                    }else if(new_pos.y > pos[pos.length]){
                        //ul.removeChild(empty_li);
                        ul.appendChild(empty_li);
                    }
                }
            }
        });
        target.addEventListener('mouseup',function(e){
            lock = false;
            target.style.cursor = 'default';
        });
    });
</script>
</body>
</html>